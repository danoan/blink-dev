<!DOCTYPE html>
<html>
	<head>

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width; initial-scale=1.0">
		<link rel="stylesheet" href="{{CSS_PATH}}normalize.css"></link>
 		<link rel="stylesheet" href="{{CSS_PATH}}mygs-fluid.css"></link> 
		<link rel="stylesheet" href="{{CSS_PATH}}teaser.css"></link>
		<link rel="stylesheet" href="{{CSS_PATH}}bootstrap.css"></link>
		
		<script src="{{JS_PATH}}jquery-1.8.2.min.js"></script>
		<!--[if lt IE 9]><script type="text/javascript" src="excanvas.js"></script><![endif]-->
		<script src="{{JS_PATH}}tagcanvas.min.js" type="text/javascript"></script>

		<script type="text/javascript">

			var o = {
			  textFont: 'Arial, Helvetica, sans-serif', maxSpeed: 0.05, minSpeed: 0.01,
			  textColour: '#900', textHeight: 25, outlineMethod: 'colour', fadeIn: 800,
			  outlineColour: '#039', outlineOffset: 0, depth: 0.97, minBrightness: 0.2,
			  wheelZoom: false, reverse: true, shadowBlur: 2, shuffleTags: true,
			  shadowOffset: [1,1], stretchX: 1.7, initial: [0,0.1], clickToFront: 600,
			};
			function tcStart() {
			  var s = (new Date).getTime() / 360;
			  o.initial[0] = 0.2 * Math.cos(s);
			  o.initial[1] = 0.2 * Math.sin(s);
			  TagCanvas.Start('myCanvas','tags',o);
			}		

			$(document).ready(function(){

				if( ! $('#myCanvas').tagcanvas({
					textColour : '#ffffff',
					outlineThickness : 1,
					maxSpeed : 0.03,
					depth : 0.75
				},'tags')){
					// TagCanvas failed to load
					$('#myCanvasContainer').hide();
				}


				$(window).keydown(function(event){
					if(event.keyCode == 13) {
						event.preventDefault();
						return false;
					}				
				});

				var login = function login(){
					FB.login(function(response){
						if(response.authResponse){
							console.log("Logado");
							afterLogin();
						}else{
							console.log("Erro");
						}
					});			
				}

				var afterLogin = function(response){
					FB.api('/me?fields=name,age_range,locale,gender,id',function(response){		

						var formData = {
							"field-name": response.name,
							"field-age": response.age_range.min,
							"field-locale": response.locale,
							"field-gender": response.gender,
							"field-fbid": response.id,
							"field-question":$("#field-question").val(),
							"field-request-type": 1
						};

						$.ajax({
							type:"POST",
							url:"",
							data: formData,
							dataType:"text",
							success:function(r){
								console.log("sucesso",r);
							},
							error:function(r){
								console.log("erro",r);
							}
						})

					});
				}

				$("#field-question").focus();

				$("#field-question").keydown(function(e){
					if(e.keyCode==13){
						login();
					}
				});	

				$(".btn").click(function(){login();});
			});
			
		</script>

	</head>

	<body>
		<div id="fb-root"></div>
			<script>
			  window.fbAsyncInit = function() {
			    // init the FB JS SDK
			    FB.init({
			      appId      : '507371419342913',
			      channelUrl : '//localhost:5000', 
			      status     : true,               
			      xfbml      : true          
			    });

			    // Additional initialization code such as adding Event Listeners goes here
			  };

			  // Load the SDK asynchronously
			  (function(d, s, id){
			     var js, fjs = d.getElementsByTagName(s)[0];
			     if (d.getElementById(id)) {return;}
			     js = d.createElement(s); js.id = id;
			     js.src = "//connect.facebook.net/en_US/all.js";
			     fjs.parentNode.insertBefore(js, fjs);
			   }(document, 'script', 'facebook-jssdk'));
			</script>		
		</div>

		<div class="all">

			<div class="row block-content-format zero-block-content">
				<div class="col6">
					<div class="teaser-image">
						<img src="{{IMG_PATH}}blink-logo-spotlight-yellow.png" width="100%" />
					</div>					
				</div>
			
				<div class="col6">
					<div class="teaser-container">
						<h1>Alguém te contou um segredo</h1>
						<span>Blink é a mais nova maneira de fazer amigos e aprender coisas novas. Você é um dos primeiros a saber dessa novidade e poderá ser um dos primeiros Blinkers da nossa comunidade, basta responder a pergunta abaixo e adicionar o nosso aplicativo do Facebook.</span>
					</div>
				</div>
			</div>

			<div class="row block-content-format zero-block-content">			
				<div class="col12 field-container">
					<label>O que você pode ensinar?</label>
					<form name="form-question" id="form-question" method="POST" action="">
						<input type="text" name="field-question" id="field-question" />

<!-- 						<div>
							<button class="btn btn-info btn-large">Vamos nessa!</button>
						</div> -->
						
					</form>

					<div id="myCanvasContainer" width="100%">
						<canvas width="300px" height="160" id="myCanvas" style="position:relative;left:50%;margin-left:-150px;">
							<p>Anything in here will be replaced on browsers that support the canvas element</p>
						</canvas>
					</div>	

					<div id="tags">
						<ul>
							<li><a href="http://www.google.com" target="_blank">Google</a></li>
							<li><a href="/fish">Fish</a></li>
							<li><a href="/chips">Chips</a></li>
							<li><a href="/salt">Salt</a></li>
							<li><a href="/vinegar">Vinegar</a></li>
							<li><a href="http://www.google.com" target="_blank">Google</a></li>
							<li><a href="/fish">Fish</a></li>
							<li><a href="/chips">Chips</a></li>
							<li><a href="/salt">Salt</a></li>
							<li><a href="/vinegar">Vinegar</a></li>
							<li><a href="http://www.google.com" target="_blank">Google</a></li>
							<li><a href="/fish">Fish</a></li>
							<li><a href="/chips">Chips</a></li>
							<li><a href="/salt">Salt</a></li>
							<li><a href="/vinegar">Vinegar</a></li>

						</ul>
					</div>					

				</div>
			</div>

	</body>

</html>
